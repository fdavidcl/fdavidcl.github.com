<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Blog - fdavidcl</title> <link rel="stylesheet" href="/assets/stylesheets/normalize.css"> <link rel="stylesheet" href="/assets/stylesheets/default.css"> </head> <body> <div class="wrapper pure-g"> <aside class="sidebar"> <div class="side-content"> <header> <a class="name-box" href="/"> <h1>David Charte</h1> <h3>fdavidcl</h3> </a> <img src="https://secure.gravatar.com/avatar/7083d161b041964b75c38376d9dee37a?s=200" class="profile-pic"/> </header> <nav class="sections"> <a href="/blog" class="section-link section-blog">blog</a> <a href="/research" class="section-link section-research">research</a> <a href="/projects" class="section-link section-projects">projects</a> </nav> <nav class="social-links"> <a class="social-button Twitter-link" href="https://twitter.com/fdavidcl" title="Twitter"><i class="fa fa-twitter"></i></a> <a class="social-button Instagram-link" href="https://instagram.com/fdavidcl" title="Instagram"><i class="fa fa-instagram"></i></a> <a class="social-button Github-link" href="https://github.com/fdavidcl" title="Github"><i class="fa fa-github"></i></a> <a class="social-button LinkedIn-link" href="https://linkedin.com/in/fdavidcl" title="LinkedIn"><i class="fa fa-linkedin"></i></a> <a class="social-button Scholar-link" href="https://scholar.google.es/citations?user=FRv_MwYAAAAJ" title="Scholar"><i class="fa fa-graduation-cap"></i></a> </nav> </div> </aside> <div class="main"> <div class="main-content"> <article> <span class="date">28-01-2017</span> <a href="/blog/2017/01/28/aproximadores-ruby/"><h1>Métodos de aproximación en Ruby</h1></a> <p>Entre las tareas de una práctica para la asignatura de Mecánica Celeste (todo el <a href="https://github.com/fdavidcl/celeste">código disponible en GitHub</a>), he tenido que programar un par de métodos numéricos de aproximación iterativos. Resultó ser una aplicación muy práctica de los <a href="http://tux.ugr.es/libreim/blog/2015/08/24/ruby-enumerators/">enumerables de Ruby</a> y me parece un buen ejemplo del ahorro de código que puede suponer su uso.</p> <p>Para abstraer distintos métodos iterativos de aproximación, definí una clase abstracta <code class="highlighter-rouge">Approximator</code> de la que derivarían el resto. Permite almacenar la aproximación actual y la tolerancia o error que se quiera aceptar. Las clases derivadas implementan el método <code class="highlighter-rouge">next_one</code> que calcula la siguiente aproximación a partir de la actual.</p> <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="c1"># Clase base para métodos numéricos de aproximación de funciones</span>
<span class="k">class</span> <span class="nc">Approximator</span>

  <span class="c1"># Datos miembro</span>
  <span class="c1">#  - current:   valor de la aproximación actual</span>
  <span class="c1">#  - tolerance: valor de tolerancia</span>
  <span class="kp">attr_accessor</span> <span class="ss">:current</span><span class="p">,</span> <span class="ss">:tolerance</span>
  
  <span class="k">def</span> <span class="nf">initialize</span> <span class="n">initial</span><span class="p">,</span> <span class="n">tolerance</span> <span class="o">=</span> <span class="no">DEFAULT_TOLERANCE</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">current</span> <span class="o">=</span> <span class="n">initial</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">tolerance</span> <span class="o">=</span> <span class="n">tolerance</span>
  <span class="k">end</span>

  <span class="c1"># Método a implementar en las clases hijas</span>
  <span class="k">def</span> <span class="nf">next_one</span>
    <span class="k">raise</span> <span class="no">NotImplementedError</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre> </div> <p>El punto clave para aprovechar la potencia de los enumeradores es implementar un método <code class="highlighter-rouge">each</code> que haga uso de la función <code class="highlighter-rouge">yield</code> para proporcionar los resultados parciales. En este caso, proporciona la aproximación encontrada en cada iteración. Lo interesante de <code class="highlighter-rouge">yield</code> es que no devuelve el control al método hasta que se necesita un nuevo resultado, de forma que sólo se realizan los cálculos necesarios. Por ejemplo, podría haber implementado (y lo hice, al principio) el método <code class="highlighter-rouge">each</code> como un <code class="highlighter-rouge">loop</code> infinito, sin condición de parada, y podría iterar las veces necesarias para obtener una precisión arbitraria (suponiendo convergencia del método). Sin embargo, para poder hacer un uso práctico de las clases, añadí la condición de parada con la tolerancia.</p> <p>Una vez implementado <code class="highlighter-rouge">each</code>, basta con incluir el módulo <code class="highlighter-rouge">Enumerable</code> que añade toda la funcionalidad de los enumeradores, como <code class="highlighter-rouge">to_a</code> que acumula en un array todos los elementos devueltos por <code class="highlighter-rouge">each</code>. Así, para calcular la mejor aproximación basta con devolver el último elemento de ese array.</p> <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Approximator</span>
  <span class="c1"># Método que calcula y proporciona aproximaciones</span>
  <span class="k">def</span> <span class="nf">each</span>
    <span class="n">previous</span> <span class="o">=</span> <span class="no">Float</span><span class="o">::</span><span class="no">INFINITY</span>
    <span class="k">until</span> <span class="p">(</span><span class="n">current</span> <span class="o">-</span> <span class="n">previous</span><span class="p">).</span><span class="nf">abs</span> <span class="o">&lt;</span> <span class="n">tolerance</span>
      <span class="c1"># Proporciona una aproximación y espera a que se</span>
      <span class="c1"># pida la siguiente</span>
      <span class="k">yield</span> <span class="n">current</span>
      <span class="n">previous</span> <span class="o">=</span> <span class="n">current</span>
      <span class="nb">self</span><span class="p">.</span><span class="nf">current</span> <span class="o">=</span> <span class="n">next_one</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="c1"># Incluimos herramientas que permiten enumerar</span>
  <span class="c1"># las aproximaciones</span>
  <span class="kp">include</span> <span class="no">Enumerable</span>

  <span class="c1"># Método que devuelve la última aproximación</span>
  <span class="c1"># para la tolerancia dada</span>
  <span class="k">def</span> <span class="nf">approximate</span>
    <span class="nb">to_a</span><span class="p">.</span><span class="nf">last</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre> </div> <p>Además de consultar la mejor aproximación, podremos realizar otras tareas como obtener una lista de <em>n</em> iteraciones con <code class="highlighter-rouge">take(n)</code>.</p> <p>Por último, basta implementar especializaciones de esta clase con métodos de aproximación concretos. El siguiente es el método de Newton-Raphson, que permite calcular raíces de funciones a partir de sucesivas evaluaciones en la función y en su derivada.</p> <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">NewtonRaphson</span> <span class="o">&lt;</span> <span class="no">Approximator</span>
  <span class="c1"># Datos miembro</span>
  <span class="c1">#  - function:   almacena la función f</span>
  <span class="c1">#  - derivative: almacena la derivada de f</span>
  <span class="kp">attr_accessor</span> <span class="ss">:function</span><span class="p">,</span> <span class="ss">:derivative</span>
  
  <span class="k">def</span> <span class="nf">initialize</span> <span class="n">initial</span><span class="p">,</span> <span class="n">tolerance</span> <span class="o">=</span> <span class="no">DEFAULT_TOLERANCE</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="n">derivative</span>
    <span class="k">super</span><span class="p">(</span><span class="n">initial</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">function</span> <span class="o">=</span> <span class="n">function</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">derivative</span> <span class="o">=</span> <span class="n">derivative</span>
  <span class="k">end</span>
  
  <span class="k">def</span> <span class="nf">next_one</span>
    <span class="c1"># Método de Newton-Raphson para encontrar raíces:</span>
    <span class="c1"># Calcula Φ(current) = current - f(current)/f'(current)</span>
    <span class="n">current</span> <span class="o">-</span> <span class="n">function</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="n">current</span><span class="p">)</span><span class="o">/</span><span class="n">derivative</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="n">current</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre> </div> <p>Un ejemplo de uso de esta implementación sería el cálculo de la raíz cuadrada de 5, como la raíz del polinomio correspondiente:</p> <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">example</span> <span class="o">=</span> <span class="no">NewtonRaphson</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>
  <span class="mi">3</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
  <span class="o">-&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">5</span> <span class="p">},</span>
  <span class="o">-&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span> <span class="p">}</span>
<span class="p">)</span>
<span class="n">example</span><span class="p">.</span><span class="nf">approximate</span>
<span class="c1">#=&gt; 2.23606797749979</span>
</code></pre> </div> <p>Otra especialización es la aproximación de la suma de una serie convergente, a partir de una función que evalúe el n-ésimo término:</p> <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">SeriesApproximator</span> <span class="o">&lt;</span> <span class="no">Approximator</span>

  <span class="c1"># Datos miembro</span>
  <span class="c1">#  - term: función que evalúa el término n-ésimo de la serie</span>
  <span class="c1">#  - n: índice del término actual se la serie</span>
  <span class="kp">attr_accessor</span> <span class="ss">:term</span><span class="p">,</span> <span class="ss">:n</span>
  
  <span class="k">def</span> <span class="nf">initialize</span> <span class="n">tolerance</span> <span class="o">=</span> <span class="no">DEFAULT_TOLERANCE</span><span class="p">,</span> <span class="n">term</span>
    <span class="k">super</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">term</span> <span class="o">=</span> <span class="n">term</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">n</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="k">end</span>

  <span class="c1"># Calcula el siguiente término de la serie y lo suma a</span>
  <span class="c1"># la aproximación actual</span>
  <span class="k">def</span> <span class="nf">next_one</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">n</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">current</span> <span class="o">+=</span> <span class="n">term</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre> </div> <p>Podemos usarla para calcular la suma de Σ1/2^n:</p> <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">series</span> <span class="o">=</span> <span class="no">SeriesApproximator</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">{</span> <span class="mi">1</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="mi">2</span><span class="o">**</span><span class="n">n</span> <span class="p">})</span>
<span class="n">series</span><span class="p">.</span><span class="nf">approximate</span>
<span class="c1">#=&gt; 0.999999999998181</span>
</code></pre> </div> <p>En particular, las sumas de series nos pueden permitir aproximar los valores de algunas funciones en diversos puntos, utilizando por ejemplo <a href="https://en.wikipedia.org/wiki/Fourier_series">desarrollos de Fourier</a>.</p> <p>Y si habéis leído hasta aquí, ¡gracias! Espero que os haya parecido útil y os sirva para aprovechar los enumerables en otros proyectos.</p> <div class="tags"> <a href="/tag/programacion">programacion</a> <a href="/tag/ruby">ruby</a> <a href="/tag/math">math</a> </div> </article> <article> <span class="date">22-08-2016</span> <a href="/blog/2016/08/22/jekyll-formularios/"><h1>Un sistema de contribuciones a blogs Jekyll para gente sin conocimientos de Jekyll, GitHub o Markdown</h1></a> <p>Durante un tiempo, los colaboradores del <a href="http://tux.ugr.es/dgiim/blog">blog de LibreIM</a> hemos tenido que componer los posts prácticamente a mano, haciendo uso de un editor de texto para escribirlos, Git para llevar el registro de cambios y una <em>pull request</em> en GitHub para enviar el post, revisarlo y corregirlo. Evidentemente, este puede ser un proceso ideal para desarrolladores acostumbrados al proceso, pero está lejos de ser perfecto cuando tratamos de mantener un blog colaborativo abierto a que cualquiera publique su conocimiento. Lo que buscamos es una forma de abstraer el proceso de edición y envío de posts para hacer el blog accesible a mucha más gente.</p> <p>La solución que concebimos consta de dos partes: por un lado, un backend que utilizaría una cuenta <em>bot</em> de GitHub para la gestión automática de ramas y <em>pull requests</em>; por otro, una aplicación web con un formulario y un sencillo editor desde la que se enviarían los posts.</p> <p class="fig"><img src="/assets/images/jekyll-form.png" alt="Formulario resultante"/> Un ejemplo del <a href="http://tux.ugr.es/dgiim/new/post">formulario resultante</a></p> <h2 id="preparativos-previos">Preparativos previos</h2> <p>Para crear nuevos <em>commits</em> y <em>pull requests</em> necesitamos una cuenta de GitHub. Podemos usar la propia o crear una nueva. Otorgaremos a dicha cuenta permisos de escritura sobre el repositorio de blog en cuestión. Después, obtendremos un <a href="https://github.com/settings/tokens">token de acceso personal</a> con permisos de modificación de repositorios. Dicho token lo almacenaremos en las variables de entorno de la shell donde vayamos a hospedar la aplicación, supongamos que bajo el nombre de <code class="highlighter-rouge">GITHUB_TOKEN</code>.</p> <h2 id="el-backend">El backend</h2> <p>Componer un guion que trabaje con Git automáticamente no es muy complicado. Se podría utilizar directamente un guion de Bash pero, en vistas a integrarlo en la aplicación web, usamos la <a href="https://rubygems.org/gems/git">gema git</a> para Ruby. Esta permite realizar todo tipo de operaciones sobre repositorios Git, a nosotros nos basta con clonar, abrir una nueva rama, incluir un nuevo archivo en un <em>commit</em> y enviarlo al repositorio remoto. El siguiente código Ruby define una función que realiza todo el proceso, notemos cómo se obtiene por parámetro un <em>block</em> (similar a una función anónima) que permite realizar las modificaciones pertinentes al repositorio:</p> <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="c1"># repo.rb</span>
<span class="nb">require</span> <span class="s1">'fileutils'</span>
<span class="nb">require</span> <span class="s1">'git'</span>

<span class="k">def</span> <span class="nf">modify_repo</span> <span class="n">repo</span><span class="p">,</span> <span class="n">head</span><span class="p">,</span> <span class="n">commit_msg</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span>
  <span class="n">dir</span> <span class="o">=</span> <span class="s2">".repo"</span>

  <span class="c1"># Usamos el token de acceso para clonar el repositorio</span>
  <span class="n">g</span> <span class="o">=</span> <span class="no">Git</span><span class="p">.</span><span class="nf">clone</span><span class="p">(</span><span class="s2">"https://</span><span class="si">#{</span><span class="no">ENV</span><span class="p">[</span><span class="s2">"GITHUB_TOKEN"</span><span class="p">]</span><span class="si">}</span><span class="s2">@github.com/</span><span class="si">#{</span><span class="n">repo</span><span class="si">}</span><span class="s2">.git"</span><span class="p">,</span> <span class="n">dir</span><span class="p">)</span>

  <span class="c1"># Configuramos el email y nombre de la cuenta bot</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">config</span><span class="p">(</span><span class="s2">"user.name"</span><span class="p">,</span> <span class="s2">"BOT"</span><span class="p">)</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">config</span><span class="p">(</span><span class="s2">"user.email"</span><span class="p">,</span> <span class="s1">'BOT_EMAIL@example.org'</span><span class="p">)</span>

  <span class="c1"># Creamos una rama nueva</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">branch</span><span class="p">(</span><span class="n">head</span><span class="p">).</span><span class="nf">checkout</span>

  <span class="c1"># Realizamos modificaciones en el repo</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">chdir</span> <span class="p">{</span> <span class="n">block</span><span class="p">.</span><span class="nf">call</span> <span class="p">}</span>

  <span class="c1"># Commit y push</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="ss">all: </span><span class="kp">true</span><span class="p">)</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">commit</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="n">commit_msg</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="s2">"origin"</span><span class="p">,</span> <span class="n">head</span><span class="p">)</span>

  <span class="no">FileUtils</span><span class="p">.</span><span class="nf">rm_rf</span><span class="p">(</span><span class="n">dir</span><span class="p">)</span>
<span class="k">end</span>
</code></pre> </div> <p>Ahora hemos de añadir la capacidad de crear <em>pull requests</em>, para ello usamos la <a href="https://rubygems.org/gems/octokit">gema octokit</a>, que acepta el token de acceso que obtuvimos antes:</p> <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="c1"># form.rb</span>
<span class="nb">require</span> <span class="s1">'octokit'</span>
<span class="nb">require_relative</span> <span class="s1">'repo'</span>

<span class="n">github</span> <span class="o">=</span> <span class="no">Octokit</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">:access_token</span> <span class="o">=&gt;</span> <span class="no">ENV</span><span class="p">[</span><span class="s2">"GITHUB_TOKEN"</span><span class="p">])</span>

<span class="n">repo</span> <span class="o">=</span> <span class="s2">"BOT/blog"</span>
<span class="n">base</span> <span class="o">=</span> <span class="s2">"gh-pages"</span>
<span class="n">head</span> <span class="o">=</span> <span class="s2">"new-post"</span>

<span class="n">modify_repo</span> <span class="n">repo</span><span class="p">,</span> <span class="n">head</span><span class="p">,</span> <span class="s2">"Nuevo post"</span> <span class="k">do</span>
  <span class="c1"># Creación del nuevo post</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">github</span><span class="p">.</span><span class="nf">create_pull_request</span><span class="p">(</span><span class="n">repo</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">head</span><span class="p">,</span> <span class="s2">"Nuevo post"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
</code></pre> </div> <p>Únicamente nos queda obtener del usuario los datos necesarios para crear un nuevo post: un titulo, un autor, una categoría y el contenido.</p> <h2 id="el-formulario">El formulario</h2> <h3 id="sinatra">Sinatra</h3> <p><a href="http://www.sinatrarb.com/">Sinatra</a> es un <em>domain specific language</em> (DSL) para Ruby que facilita la creación de aplicaciones web sencillas sin apenas esfuerzo. Basta con escribir las peticiones HTTP que se aceptan y cuál es la respuesta. Además, es muy útil utilizarlo junto a otras gemas de Ruby que ahorren trabajo a la hora de escribir las plantillas y el estilo. Nuestro archivo de dependencias <code class="highlighter-rouge">Gemfile</code> queda de la siguiente forma:</p> <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="c1"># Gemfile</span>

<span class="n">source</span> <span class="s1">'https://rubygems.org'</span>

<span class="n">gem</span> <span class="s1">'sinatra'</span>
<span class="n">gem</span> <span class="s1">'sinatra-contrib'</span>
<span class="n">gem</span> <span class="s1">'thin'</span>      <span class="c1"># Web server</span>
<span class="n">gem</span> <span class="s1">'haml'</span>      <span class="c1"># For layouts</span>
<span class="n">gem</span> <span class="s1">'sass'</span>      <span class="c1"># For stylesheets</span>
<span class="n">gem</span> <span class="s1">'kramdown'</span>  <span class="c1"># For the preview</span>
<span class="n">gem</span> <span class="s1">'rouge'</span>     <span class="c1"># For syntax highlighting</span>
<span class="n">gem</span> <span class="s1">'octokit'</span>   <span class="c1"># For pull requests</span>
<span class="n">gem</span> <span class="s1">'git'</span>       <span class="c1"># Repo management</span>
<span class="n">gem</span> <span class="s1">'recaptcha'</span> <span class="c1"># Some protection against bots</span>
</code></pre> </div> <p>Para instalar y manejar las dependencias usamos <a href="http://bundler.io/">Bundler</a>: basta así con ejecutar <code class="highlighter-rouge">gem install bundler</code> y tras esto <code class="highlighter-rouge">bundle install</code>.</p> <h3 id="respondiendo-a-peticiones">Respondiendo a peticiones</h3> <p>Vamos a ampliar el archivo <code class="highlighter-rouge">form.rb</code> creado anteriormente para aceptar y responder un par de peticiones HTTP. Responderemos a <code class="highlighter-rouge">GET /</code> mostrando el formulario, que crearemos aparte en una vista en Haml. Por otro lado, al enviar dicho formulario se creará una petición <code class="highlighter-rouge">POST /posts</code> con los datos que necesitamos para componer el nuevo post.</p> <div class="language-haml highlighter-rouge"><pre class="highlight"><code><span class="c">-# views/form.haml
</span><span class="nt">%h1</span> Nuevo post
<span class="nt">%form</span><span class="p">{</span><span class="ss">action: </span><span class="s2">"/posts"</span><span class="p">,</span> <span class="ss">method: </span><span class="s2">"post"</span><span class="p">}</span>
  <span class="nt">%input</span><span class="p">{</span><span class="ss">type: </span><span class="s2">"text"</span><span class="p">,</span> <span class="ss">name: </span><span class="s2">"title"</span><span class="p">,</span> <span class="ss">placeholder: </span><span class="s2">"Título"</span><span class="p">}</span>
  <span class="nt">%input</span><span class="p">{</span><span class="ss">type: </span><span class="s2">"text"</span><span class="p">,</span> <span class="ss">name: </span><span class="s2">"author"</span><span class="p">,</span> <span class="ss">placeholder: </span><span class="s2">"Autor 1, Autor 2, ..."</span><span class="p">}</span>
  <span class="nt">%input</span><span class="p">{</span><span class="ss">type: </span><span class="s2">"text"</span><span class="p">,</span> <span class="ss">name: </span><span class="s2">"category"</span><span class="p">,</span> <span class="ss">placeholder: </span><span class="s2">"Categoría"</span><span class="p">}</span>
  <span class="nt">%textarea</span><span class="p">{</span><span class="ss">name: </span><span class="s2">"content"</span><span class="p">,</span> <span class="ss">placeholder: </span><span class="s2">"Contenido"</span><span class="p">}</span>
  <span class="nt">%input</span><span class="p">{</span><span class="ss">type: </span><span class="s2">"submit"</span><span class="p">,</span> <span class="ss">value: </span><span class="s2">"Enviar"</span><span class="p">}</span>
</code></pre> </div> <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="c1"># form.rb</span>
<span class="nb">require</span> <span class="s1">'rubygems'</span>
<span class="nb">require</span> <span class="s1">'bundler'</span>
<span class="no">Bundler</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:default</span><span class="p">)</span>
<span class="nb">require_relative</span> <span class="s2">"repo"</span>

<span class="n">get</span> <span class="s2">"/"</span> <span class="k">do</span>
  <span class="c1"># Mostramos el formulario</span>
  <span class="n">haml</span> <span class="ss">:form</span>
<span class="k">end</span>

<span class="n">post</span> <span class="s2">"/posts/?"</span> <span class="k">do</span>
  <span class="c1"># Obtenemos los datos</span>
  <span class="n">title</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="ss">:title</span><span class="p">]</span>
  <span class="n">author</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="ss">:author</span><span class="p">]</span>
  <span class="n">content</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="ss">:content</span><span class="p">]</span>
  <span class="n">category</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="ss">:category</span><span class="p">]</span> <span class="o">||</span> <span class="s2">"unclassified"</span>

  <span class="c1"># Creamos el nombre del archivo</span>
  <span class="n">date</span> <span class="o">=</span> <span class="no">Date</span><span class="p">.</span><span class="nf">today</span><span class="p">.</span><span class="nf">strftime</span> <span class="s2">"%Y-%m-%d"</span>
  <span class="n">filename</span> <span class="o">=</span> <span class="n">title</span><span class="p">.</span><span class="nf">downcase</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s2">" "</span><span class="p">)[</span><span class="mi">0</span><span class="p">.</span><span class="nf">.</span><span class="mi">4</span><span class="p">].</span><span class="nf">join</span><span class="p">(</span><span class="s2">"-"</span><span class="p">)</span>

  <span class="n">github</span> <span class="o">=</span> <span class="no">Octokit</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">:access_token</span> <span class="o">=&gt;</span> <span class="no">ENV</span><span class="p">[</span><span class="s2">"GITHUB_TOKEN"</span><span class="p">])</span>

  <span class="n">repo</span> <span class="o">=</span> <span class="s2">"BOT/blog"</span>
  <span class="n">base</span> <span class="o">=</span> <span class="s2">"gh-pages"</span>
  <span class="n">head</span> <span class="o">=</span> <span class="s2">"new-post-</span><span class="si">#{</span><span class="n">filename</span><span class="si">}</span><span class="s2">"</span>

  <span class="n">modify_repo</span> <span class="n">repo</span><span class="p">,</span> <span class="n">head</span><span class="p">,</span> <span class="s2">"Nuevo post"</span> <span class="k">do</span>
    <span class="c1"># Creamos el archivo del post</span>
    <span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">"_posts/</span><span class="si">#{</span><span class="n">date</span><span class="si">}</span><span class="s2">-</span><span class="si">#{</span><span class="n">filename</span><span class="si">}</span><span class="s2">.md"</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
        <span class="n">f</span><span class="p">.</span><span class="nf">write</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh">
---
layout: post
title: </span><span class="si">#{</span><span class="n">title</span><span class="si">}</span><span class="sh">
authors: </span><span class="si">#{</span><span class="n">author</span><span class="p">.</span><span class="nf">split</span> <span class="sr">/,\s*/</span><span class="si">}</span><span class="sh">
category: </span><span class="si">#{</span><span class="n">category</span><span class="si">}</span><span class="sh">
---

</span><span class="si">#{</span><span class="n">content</span><span class="si">}</span><span class="sh">
</span><span class="no">EOF</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">response</span> <span class="o">=</span> <span class="n">github</span><span class="p">.</span><span class="nf">create_pull_request</span><span class="p">(</span><span class="n">repo</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">head</span><span class="p">,</span> <span class="s2">"Nuevo post"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
<span class="k">end</span>
</code></pre> </div> <p>Para iniciar el servidor web con nuestra aplicación, debería bastar con ejecutar <code class="highlighter-rouge">ruby form.rb</code> en el terminal.</p> <h3 id="aadiendo-un-editor-de-verdad">Añadiendo un editor de verdad</h3> <p>Todo esto ya está muy bien, y la aplicación ahorra un montón de esfuerzo para cada vez que se crea un nuevo post. Pero aún queda una barrera que evitaría que algunos usuarios estuvieran cómodos escribiendo: el marcado de formato con Markdown. Existen diversos editores Markdown que pueden incrustarse en una página web, algunos con amplias funcionalidades y otros más sencillos. Nosotros optamos por <a href="https://simplemde.com/">SimpleMDE</a>, que facilita la escritura mediante algunas pistas visuales en el código y unos botones que dan acceso a la mayoría de opciones de formato de Markdown.</p> <p>Este editor aporta además una opción de previsualización personalizable, lo que quiere decir que podemos modificar la forma en que se compila el código Markdown y se muestra dicha vista previa. Como los blogs Jekyll usan el intérprete <a href="http://kramdown.gettalong.org/">Kramdown</a> por defecto, podemos añadir una ruta al servidor que compile un documento mediante esta herramienta. Además, utilizamos también la gema <a href="http://rouge.jneen.net/">Rouge</a> para resaltado de código.</p> <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="c1"># form.rb</span>
<span class="c1"># ...</span>
<span class="n">post</span> <span class="s2">"/preview/?"</span> <span class="k">do</span>
  <span class="no">Kramdown</span><span class="o">::</span><span class="no">Document</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:content</span><span class="p">],</span> <span class="ss">syntax_highlighter: :rouge</span><span class="p">).</span><span class="nf">to_html</span>
<span class="k">end</span>
</code></pre> </div> <p>Por otro lado, el editor habrá que inicializarlo mediante un código similar al siguiente:</p> <div class="language-haml highlighter-rouge"><pre class="highlight"><code><span class="nt">%form</span><span class="p">{</span><span class="ss">action: </span><span class="s2">"/posts"</span><span class="p">,</span> <span class="ss">method: </span><span class="s2">"post"</span><span class="p">}</span>
  <span class="c">-# ...
</span>  <span class="nt">%textarea</span><span class="nf">#markdown_editor</span><span class="p">{</span><span class="ss">name: </span><span class="s2">"content"</span><span class="p">,</span> <span class="ss">placeholder: </span><span class="s2">"Contenido"</span><span class="p">}</span>

<span class="nt">%link</span><span class="p">{</span><span class="ss">rel: </span><span class="s2">"stylesheet"</span><span class="p">,</span> <span class="ss">href: </span><span class="s2">"https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css"</span><span class="p">}</span>
<span class="nt">%script</span><span class="p">{</span><span class="ss">src: </span><span class="s2">"https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"</span><span class="p">}</span>
<span class="nd">:javascript
</span>  <span class="c1">// La típica función para peticiones AJAX</span>
  <span class="kd">function</span> <span class="nx">AjaxRequest</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">method</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">xmlhttp</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">XMLHttpRequest</span><span class="p">)</span>
      <span class="nx">xmlhttp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
    <span class="k">else</span>
      <span class="nx">xmlhttp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ActiveXObject</span><span class="p">(</span><span class="s2">"Microsoft.XMLHTTP"</span><span class="p">);</span>

    <span class="nx">xmlhttp</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">xmlhttp</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="mi">4</span> <span class="o">&amp;&amp;</span> <span class="nx">xmlhttp</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">xmlhttp</span><span class="p">.</span><span class="nx">responseXML</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">callback</span><span class="p">(</span><span class="nx">xmlhttp</span><span class="p">.</span><span class="nx">responseXML</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">callback</span><span class="p">(</span><span class="nx">xmlhttp</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="nx">xmlhttp</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">method</span><span class="p">,</span> <span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">method</span> <span class="o">==</span> <span class="s2">"POST"</span><span class="p">)</span>
      <span class="nx">xmlhttp</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="s2">"Content-type"</span><span class="p">,</span> <span class="s2">"application/x-www-form-urlencoded"</span><span class="p">);</span>

    <span class="nx">xmlhttp</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// Inicializa el editor Markdown con algunas opciones extra</span>
  <span class="kd">var</span> <span class="nx">simplemde</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SimpleMDE</span><span class="p">({</span>
    <span class="na">element</span><span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"markdown_editor"</span><span class="p">),</span>
    <span class="na">blockStyles</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">code</span><span class="p">:</span> <span class="s2">"~~~"</span>
    <span class="p">},</span>
    <span class="c1">// Usa el sistema propio para vista previa (kramdown + rouge)</span>
    <span class="na">previewRender</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">plainText</span><span class="p">,</span> <span class="nx">preview</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Esperar un segundo sin cambios para hacer la petición</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">delay</span><span class="p">)</span>
        <span class="nx">clearTimeout</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">delay</span><span class="p">);</span>

      <span class="nb">window</span><span class="p">.</span><span class="nx">delay</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">AjaxRequest</span><span class="p">(</span><span class="s2">"/preview"</span><span class="p">,</span> <span class="s2">"POST"</span><span class="p">,</span> <span class="s2">"content="</span> <span class="o">+</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">plainText</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">// `preview` es el nodo que contiene la vista previa</span>
          <span class="nx">preview</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
        <span class="p">});</span>
      <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>

      <span class="k">return</span> <span class="nx">preview</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">});</span>
</code></pre> </div> <p>Ahora sí, con todo esto tenemos un editor que facilita la tarea de escribir un post a cualquiera.</p> <h2 id="los-extras">Los extras</h2> <p>Un par de funcionalidades adicionales que hemos utilizado en <a href="http://tux.ugr.es/dgiim/new/post">el formulario para LibreIM</a> son la inclusión de <a href="http://mathjax.org/">MathJax</a> para interpretar fórmulas en LaTeX, y de un CAPTCHA mediante la gema <a href="https://rubygems.org/gems/recaptcha/">recaptcha</a>. No entro aquí en más detalle porque son fáciles de usar; además, todo nuestro código está <a href="https://github.com/libreim/form-im">publicado en GitHub</a>.</p> <h2 id="en-conclusin">En conclusión…</h2> <p>Mantener un blog en Jekyll tiene muchas ventajas: se puede hostear en cualquier servidor ya que es un generador de sitios estáticos, se puede realizar control de cambios por Git, etc. Y, con un poco de trabajo y una pequeña aplicación web, también se puede hacer accesible la colaboración a cualquier persona, incluso sin conocimientos de GitHub, Jekyll o Markdown. Ahora queda la parte complicada: convencer a más personas para que contribuyan al blog ;)</p> <div class="tags"> <a href="/tag/code">code</a> <a href="/tag/jekyll">jekyll</a> <a href="/tag/github">github</a> <a href="/tag/libreim">libreim</a> </div> </article> <article> <span class="date">19-06-2015</span> <a href="/blog/2015/06/19/hidpi-linux/"><h1>Gestionando HiDPI en Linux</h1></a> <p>Desde hace un tiempo estoy usando un Dell XPS 15 como ordenador principal, y esta máquina incluye una característica que lo hace increíble y, a veces, casi inusable: la resolución de la pantalla. Me refiero a su pantalla UHD, que en términos numéricos son 3840 píxeles de ancho por 2160 de alto. Para haceros una idea, eso significa que en esta pantalla caben los píxeles de exactamente 4 pantallas Full HD (1920x1080). La densidad de píxeles resulta en 282 PPI, bastante alta para una pantalla de 15 pulgadas, por lo que entra en la categoría de lo que denominamos HiDPI.</p> <p>Y evidentemente, leer y ver contenido en una pantalla como esta es genial, todo se ve muy nítido y es imposible ver algo pixelado. El problema viene al utilizar aplicaciones para otros fines: ofimática, desarrollo o edición de imágenes. Según con qué bibliotecas estén compuestas las interfaces de usuario, o según las opciones que aporten estos programas, se podrán o no adaptar a la resolución, y por tanto escalarse a un tamaño mayor para que sea usable.</p> <p><strong>GNOME</strong></p> <p>La tercera versión de GNOME y de GTK+ están ya más que preparadas para las pantallas HiDPI, y resulta muy sencillo escalar las interfaces tanto de la Shell como de las aplicaciones de GNOME. Basta con abrir la Herramienta de retoques (o Tweak Tool), y ajustar el escalado de ventanas a 2:</p> <p><a href="http://i.imgur.com/6ggqmHB.jpg"><img src="http://67.media.tumblr.com/0b576df42eb1ab6ef79a809f18d0846f/tumblr_inline_nq7dle0HHa1r7kqtk_540.jpg" alt="image"/></a></p> <p>Este ajuste permite adaptar el tamaño de todas las aplicaciones GTK+3, pero no así las que usen GTK+2 u otras bibliotecas (Qt, wxWidgets&hellip;). Qt en su versión 5 sí adapta el tamaño de los elementos a la resolución, pero las versiones anteriores no lo hacen y aún hay pocas aplicaciones que se hayan pasado a esta nueva versión.</p> <p><strong>Firefox</strong></p> <p>En Firefox el ajuste del tamaño &ldquo;virtual&rdquo; de un píxel se puede ajustar, bien manualmente, o bien mediante una extensión que permite un comportamiento dinámico según la resolución de la pantalla en que se encuentre el navegador (lo que nos permite usar proyectores o monitores externos que no sean HiDPI): <a href="https://addons.mozilla.org/en-US/firefox/addon/autohidpi/">AutoHiDPI</a>. Basta instalarla y podemos personalizar el aumento de tamaño cuando la ventana de Firefox esté en un monitor HiDPI.</p> <p><strong>Atom</strong></p> <p>Atom es un editor de texto y código muy completo y extensible mediante <em>paquetes</em>. Uno de estos paquetes, apropiadamente llamado <a href="https://atom.io/packages/hidpi">hidpi</a>, realiza la misma tarea que la extensión de Firefox anterior: ajusta la ampliación de elementos en Atom a la resolución del monitor en que se use.</p> <p><strong>Otras aplicaciones</strong></p> <p>Hay muchas otras aplicaciones que aún no se adaptan del todo a este tipo de resoluciones. Por ejemplo, todavía no he encontrado un reproductor de música para Linux que se adapte y me resulte cómodo (Rhythmbox sí funciona, pero la gestión de listas es menos intuitiva; sigo usando Clementine). El asunto es peor cuando hablamos de editores de imágenes, los botones de herramientas de <a href="http://pinta-project.com/">Pinta</a> y <a href="https://krita.org/">Krita</a> son demasiado pequeños para poder usarse cómodamente, aunque es un alivio que se esté trabajando en <a href="https://krita.org/item/krita-2-9-2-released/">portar Krita a Qt 5</a>.</p> <p><a href="http://i.imgur.com/PRd7714.jpg"><img src="http://67.media.tumblr.com/721a184f440e1763fe4353395ce5e8df/tumblr_inline_nq7ex3gnhT1r7kqtk_540.png" alt=""/></a></p> <p><em>Pinta, Krita, Exaile y Audacity no se adaptan a la resolución UHD.</em></p> <p>Hasta aquí estos pequeños consejos para quienes tengáis pantallas de muy alta resolución. espero que sean útiles y si sabéis de alguna buena aplicación que funcione bien con HiDPI, no dudéis en dejarla en los comentarios.</p> <div class="tags"> <a href="/tag/tech">tech</a> <a href="/tag/linux">linux</a> <a href="/tag/hidpi">hidpi</a> <a href="/tag/4k">4k</a> <a href="/tag/uhd">uhd</a> </div> </article> <article> <span class="date">24-02-2015</span> <a href="/blog/2015/02/24/open-data-day-y-el-hackathon-de-datos-abiertos/"><h1>Open Data Day y el hackathon de datos abiertos</h1></a> <p><em><a href="https://joindiaspora.com/posts/5653136">Versión en inglés</a></em></p> <p>Este pasado sábado 21 de febrero se celebraba el Open Data Day, un día en el que se promueve la publicación de datos administrativos y gubernamentales. Con este objetivo, se organizó un hackathon (maratón de programación) a lo largo de todo el fin de semana, que pretendía demostrar la utilidad de estos datos abiertos mediante análisis y minería de datos, visualizaciones y gráficos, etc.</p> <h3>El Open Data Day en Granada</h3> <blockquote class="twitter-tweet" lang="es"><p>Empezando la sesión de viernes del <a href="https://twitter.com/hashtag/opendataday?src=hash">#opendataday</a>, con <a href="https://twitter.com/jjmerelo">@jjmerelo</a> , <a href="https://twitter.com/OSLUGR">@OSLUGR</a> y gente <a href="http://t.co/5jMecwlVJk">pic.twitter.com/5jMecwlVJk</a></p><div>— David Charte (@fdavidcl) </div><a href="https://twitter.com/fdavidcl/status/568690265369796608">febrero 20, 2015</a></blockquote> <p>En particular, en Granada fue la <a href="http://osl.ugr.es">Oficina de Software Libre</a> de la Universidad de Granada la que <a href="http://osl.ugr.es/2015/01/26/open-data-day-2015/">organizó el hackathon local</a> para la ocasión. En él, se presentaron tres proyectos distintos de forma que los participantes del hackathon se unieran a uno de ellos y colaboraran desde el viernes hasta el lunes. Estos tres proyectos trataban temas bastante distintos:</p> <ul><li><strong>Scraping y análisis de datos del ayuntamiento</strong>, propuesto por el periodista de datos <a href="https://twitter.com/inchocordero">Incho Cordero</a>. Esta iniciativa proponía recuperar contratos del ayuntamiento de Granada, sobre todo de obras y similares, para realizar un estudio sobre las empresas contratadas y los costes de dichos contratos, tras un proceso de scraping previo para extraer la información de los PDFs en los que se publica.</li> <li><strong>Monitorización y predicción del estado de tráfico</strong>, a raíz del <a href="https://proyectopetra.wordpress.com/">Proyecto PETRA</a>. El proyecto en cuestión utiliza unos dispositivos de bajo coste que rastrean señales de Bluetooth y Wi-Fi para detectar coches mediante los manos libres y móviles. De esta forma se obtienen datos sobre el paso de los dispositivos en distintos puntos de las carreteras y se pueden utilizar para, a partir de cambios ligeros en el tráfico, predecir distintos estados futuros.</li> <li><strong>Comparación de portales de transparencia universitarios</strong>, presentado por <a href="https://twitter.com/mhmario89">Mario Heredia</a>, <a href="https://twitter.com/moloco5">Mónica López</a>, <a href="https://twitter.com/germaaan_">Germán Martínez</a>&hellip; Este último proyecto consistía en utilizar los portales de transparencia de las distintas universidades españolas, para realizar comparativas acerca de los datos que proporcionan y de las universidades en sí, incluyendo scraping de los datos que estuviesen en formatos poco accesibles.</li> </ul><h3>El hackathon con el proyecto PETRA</h3> <p>Me apunté al hackathon del proyecto PETRA sencillamente porque prometía más ciencia de datos y menos temas político-administrativos, por lo que resultaba más interesante que los otros dos. El objetivo durante el fin de semana fue encontrar fuentes de datos de tráfico, extraer esos datos y publicarlos, para después tratar de realizar visualizaciones sobre mapas.</p> <p>Gracias a que el equipo estaba compuesto por gente de conocimientos muy diversos, tanto distintos lenguajes de programación como distintas materias sobre minería y visualización de datos, se pudieron distribuir tareas y proponer ideas, todo en forma de <a href="https://github.com/global-urban-datafest/grx-PETRA/issues/">issues del repositorio</a>, que combinadas llevarían a cabo los objetivos, entre ellas:</p> <ul><li>Extracción de los datos de paso de vehículos por estaciones de la DGT</li> <li>Concatenación y preprocesamiento de dichos datos</li> <li>Estudio y obtención de datos de diferentes APIs de tráfico</li> <li>Minería de datos y clasificación con WEKA</li> <li>Estudio de plataformas de mapas</li> <li>Estudio de librerías de gráficos para visualización de datos</li> <li>Hacer un logo para el proyecto</li> </ul><p>Todos los resultados están publicados en el <a href="https://github.com/global-urban-datafest/grx-PETRA">repositorio dedicado al hackathon</a>, incluyendo el <a href="https://github.com/global-urban-datafest/grx-PETRA/blob/master/Datasets/dgt/all.csv">archivo CSV</a> con los datos de la DGT acerca de las estaciones de monitorización, extraídos de varios PDFs; <a href="https://github.com/global-urban-datafest/grx-PETRA/blob/master/Datasets/dgt/joinSources.sh">los</a> <a href="https://github.com/global-urban-datafest/grx-PETRA/blob/master/Datasets/dgt/processCSV.py">scripts</a> <a href="https://github.com/global-urban-datafest/grx-PETRA/blob/master/Datasets/concat.js">utilizados</a> para preprocesarlos; el <a href="https://github.com/global-urban-datafest/grx-PETRA/blob/master/Datasets/apis/traffic_apis.R">código</a> de obtención de datos de APIs en R; el estudio de recursos para <a href="https://github.com/global-urban-datafest/grx-PETRA/issues/10">gráficos</a> y <a href="https://github.com/global-urban-datafest/grx-PETRA/issues/9">mapas</a>, y cómo no, las <a href="https://github.com/global-urban-datafest/grx-PETRA/tree/master/Logo">propuestas de logo</a> para el proyecto.</p> <p>Además de esto, se realizaron algunos gráficos en Google <a href="https://www.google.com/fusiontables/DataSource?docid=1v8M5FZCgBdUaXLVx3WGKa3wEa-IHOTR_J_67YhWu#rows:id=1">Fusion Tables</a>, se extrajo información interesante mediante Weka y se publicaron también los datos en <a href="https://fdavidcl.shinyapps.io/PETRA">una aplicación web</a> realizada con Shiny. Todo esto se resumió en la <a href="//www.slideshare.net/fergunet/open-dataday-hackathon-conclusiones">presentación de conclusiones</a> para el lunes.</p> <blockquote class="twitter-tweet" lang="es"><p>El equipo del <a href="https://twitter.com/proyectoPETRA">@proyectoPETRA</a> en el <a href="https://twitter.com/hashtag/SmartCityHack?src=hash">#SmartCityHack</a> <a href="https://twitter.com/hashtag/OpenDataDay?src=hash">#OpenDataDay</a> trabajando en <a href="https://twitter.com/fcienciasugr">@fcienciasugr</a> <a href="https://twitter.com/hashtag/grx?src=hash">#grx</a> <a href="http://t.co/P82wNTvIDP">pic.twitter.com/P82wNTvIDP</a></p><div>— Pablo García (@fergunet) </div><a href="https://twitter.com/fergunet/status/569102017056129024">febrero 21, 2015</a></blockquote> <script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script> <div class="tags"> <a href="/tag/code">code</a> <a href="/tag/opendata">opendata</a> <a href="/tag/opendataday">opendataday</a> <a href="/tag/open data day">open data day</a> <a href="/tag/hackathon">hackathon</a> <a href="/tag/urbancityhack">urbancityhack</a> </div> </article> <nav class="pagination"> <span class="note">1 of 11</span> <a href="/blog/2/">Older</a> <a href="/blog/archive">All posts</a> </nav> <style>.wrapper .sidebar .side-content .sections .section-blog{background:#fff;color:#000;border-color:#fff}@media(min-width:64em){.wrapper .sidebar .side-content .sections .section-blog{margin-right:-2rem;padding-right:2rem}}</style> </div> </div> </div> <link href='https://fonts.googleapis.com/css?family=Source Sans Pro:300,400,400i,700|Inconsolata:400,700' rel='stylesheet' type='text/css'> <link href="//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet"/> <link rel="stylesheet" href="/assets/stylesheets/highlight-friendly.css"> </body> </html>